{"version":3,"file":"css-dissolve-animation-angular.umd.min.js","sources":["../../out-tsc/lib/src/dissolve-animation.ts","../../out-tsc/lib/src/transition-item.ts","../../out-tsc/lib/src/cross-dissolve.ts","../../out-tsc/lib/src/sequence-dissolve.ts"],"sourcesContent":["import { TransitionItem } from './transition-item';\nexport class DissolveAnimation {\npublic itemA: TransitionItem;\npublic itemB: TransitionItem;\npublic data: any;\npublic i = 0;\npublic dataArray: any[];\npublic transitionDuration: number;\npublic interval: number;\npublic staticKlasses: string;\nprivate fadeInCSSLabel: string;\nprivate fadeOutCSSLabel: string;\nprivate invisibleCSSLabel = 'da-invisible';\nprivate visibleCSSLabel = 'da-visible';\nprivate hiddenCSSLabel = 'da-hidden';\nprivate shownCSSLabel = 'da-shown';\nprivate eventIdentifier: string;\n/**\n * @param {?} dataArray\n * @param {?} staticKlasses\n * @param {?=} interval\n * @param {?=} transitionDuration\n * @param {?=} fadeInOverride\n * @param {?=} fadeOutOverride\n * @param {?=} eventIdentifier\n * @param {?=} transitionDurationWasProvided\n */\nconstructor( dataArray:          any[],\n               staticKlasses:      string,\n               interval:           number=8000,\n               transitionDuration: number,\n               fadeInOverride:     string,\n               fadeOutOverride:    string,\n               eventIdentifier:    string,\n               transitionDurationWasProvided=false) {\n    this.dataArray = dataArray;\n    this.staticKlasses = staticKlasses;\n    this.interval = interval;\n    this.transitionDuration = transitionDuration;\n    this.eventIdentifier = eventIdentifier === undefined ? '' : eventIdentifier+'--';\n\n    if (transitionDurationWasProvided && (!fadeInOverride || !fadeOutOverride)) {\n      throw 'ERROR: `fadeInOverride` and `fadeOutOverride` are required '+\n            'if you provide `transitionDuration`.';\n    } else if (!transitionDurationWasProvided && (fadeInOverride || fadeOutOverride)) {\n      throw 'ERROR: `fadeInOverride` and `fadeOutOverride` can only be '+\n            'provided if `transitionDuration` is also provided';\n    } else if (transitionDurationWasProvided && (fadeInOverride && fadeOutOverride)) {\n      this.fadeInCSSLabel = fadeInOverride;\n      this.fadeOutCSSLabel = fadeOutOverride;\n    } else {\n      this.fadeInCSSLabel = 'da-fade-in';\n      this.fadeOutCSSLabel = 'da-fade-out';\n    }\n  };\n/**\n * @param {?} klasses\n * @return {?}\n */\npublic klasses(klasses: string):string {\n    return this.staticKlasses === undefined ? klasses : `${klasses} ${this.staticKlasses}`;\n  }\npublic fadeOutKlass   = () => this.klasses(this.fadeOutCSSLabel);\npublic fadeInKlass    = () => this.klasses(this.fadeInCSSLabel);\npublic invisibleKlass = () => this.klasses(this.invisibleCSSLabel);\npublic visibleKlass   = () => this.klasses(this.visibleCSSLabel);\npublic hiddenKlass    = () => this.klasses(this.hiddenCSSLabel);\npublic shownKlass     = () => this.klasses(this.shownCSSLabel);\nprivate promisefy = (item: TransitionItem, klass: string, delay: number):Promise<any> => {\n    const /** @type {?} */ eventName = `${this.eventIdentifier}${this.itemName(item)}--${klass}`;\n    this.emitEvent(`${eventName}--WILL-ADD`);\n    item.klass = this.klasses(klass);\n    return new Promise((resolve, reject) => {\n      setTimeout(() => {\n        this.emitEvent(`${eventName}--WILL-REMOVE`);\n        resolve(item);\n      }, delay);\n    });\n  }\npublic fadeOut   = (it: TransitionItem) => this.promisefy(it, this.fadeOutCSSLabel, this.transitionDuration);\npublic fadeIn    = (it: TransitionItem) => this.promisefy(it, this.fadeInCSSLabel, this.transitionDuration);\npublic invisible = (it: TransitionItem) => this.promisefy(it, this.invisibleCSSLabel, this.interval);\npublic visible   = (it: TransitionItem) => this.promisefy(it, this.visibleCSSLabel, this.interval);\npublic hidden    = (it: TransitionItem) => this.promisefy(it, this.hiddenCSSLabel, this.interval);\npublic shown     = (it: TransitionItem) => this.promisefy(it, this.shownCSSLabel, this.interval);\n/**\n * @return {?}\n */\npublic getABTracks(): TransitionItem[] {\n    let /** @type {?} */ a: TransitionItem;\n    let /** @type {?} */ b: TransitionItem;\n    if (this.itemA.state === 'show') {\n      [a, b] = [this.itemA, this.itemB];\n    } else {\n      [a, b] = [this.itemB, this.itemA];\n    }\n    this.data = b.data;\n\n    // switch the `'hide'`/`'show'` order so\n    // next time `a` and `b` get assigned to\n    // the opposit items\n    [a.state, b.state] = ['hide', 'show'];\n    return [a, b];\n  }\n/**\n * @return {?}\n */\npublic next(): any {\n    const /** @type {?} */ index = this.i;\n    this.i = this.i === this.dataArray.length-1 ? 0 : this.i+1;\n    return this.dataArray[index];\n  }\n/**\n * @param {?} label\n * @return {?}\n */\nprivate emitEvent(label: string): void {\n    const /** @type {?} */ evt = new Event(label);\n    document.dispatchEvent(evt);\n  }\n/**\n * @param {?} item\n * @return {?}\n */\nprivate itemName(item: TransitionItem) {\n    return item.track === 1 ? 'itemA' : 'itemB';\n  }\n}\n\nfunction DissolveAnimation_tsickle_Closure_declarations() {\n/** @type {?} */\nDissolveAnimation.prototype.itemA;\n/** @type {?} */\nDissolveAnimation.prototype.itemB;\n/** @type {?} */\nDissolveAnimation.prototype.data;\n/** @type {?} */\nDissolveAnimation.prototype.i;\n/** @type {?} */\nDissolveAnimation.prototype.dataArray;\n/** @type {?} */\nDissolveAnimation.prototype.transitionDuration;\n/** @type {?} */\nDissolveAnimation.prototype.interval;\n/** @type {?} */\nDissolveAnimation.prototype.staticKlasses;\n/** @type {?} */\nDissolveAnimation.prototype.fadeInCSSLabel;\n/** @type {?} */\nDissolveAnimation.prototype.fadeOutCSSLabel;\n/** @type {?} */\nDissolveAnimation.prototype.invisibleCSSLabel;\n/** @type {?} */\nDissolveAnimation.prototype.visibleCSSLabel;\n/** @type {?} */\nDissolveAnimation.prototype.hiddenCSSLabel;\n/** @type {?} */\nDissolveAnimation.prototype.shownCSSLabel;\n/** @type {?} */\nDissolveAnimation.prototype.eventIdentifier;\n/** @type {?} */\nDissolveAnimation.prototype.fadeOutKlass;\n/** @type {?} */\nDissolveAnimation.prototype.fadeInKlass;\n/** @type {?} */\nDissolveAnimation.prototype.invisibleKlass;\n/** @type {?} */\nDissolveAnimation.prototype.visibleKlass;\n/** @type {?} */\nDissolveAnimation.prototype.hiddenKlass;\n/** @type {?} */\nDissolveAnimation.prototype.shownKlass;\n/** @type {?} */\nDissolveAnimation.prototype.promisefy;\n/** @type {?} */\nDissolveAnimation.prototype.fadeOut;\n/** @type {?} */\nDissolveAnimation.prototype.fadeIn;\n/** @type {?} */\nDissolveAnimation.prototype.invisible;\n/** @type {?} */\nDissolveAnimation.prototype.visible;\n/** @type {?} */\nDissolveAnimation.prototype.hidden;\n/** @type {?} */\nDissolveAnimation.prototype.shown;\n}\n","\nexport class TransitionItem {\npublic track: number;\npublic state: string;\npublic klass: string;\npublic data: any;\n/**\n * @param {?} track\n * @param {?} state\n * @param {?} klass\n * @param {?} data\n */\nconstructor(track: number, state: string, klass: string, data: string) {\n    this.track = track;\n    this.state = state;\n    this.klass = klass;\n    this.data = data;\n  }\n}\n\nfunction TransitionItem_tsickle_Closure_declarations() {\n/** @type {?} */\nTransitionItem.prototype.track;\n/** @type {?} */\nTransitionItem.prototype.state;\n/** @type {?} */\nTransitionItem.prototype.klass;\n/** @type {?} */\nTransitionItem.prototype.data;\n}\n","import { DissolveAnimation } from './dissolve-animation';\nimport { TransitionItem } from './transition-item';\nexport class CrossDissolve extends DissolveAnimation {\n/**\n * @param {?} dataArray\n * @param {?=} __1\n */\nconstructor( dataArray:           any[],\n             { staticKlasses = /** @type {?} */((      <string> undefined)),\n               interval = /** @type {?} */((           <number> undefined)),\n               transitionDuration = /** @type {?} */(( <number> undefined)),\n               fadeInOverride = /** @type {?} */((     <string> undefined)),\n               fadeOutOverride = /** @type {?} */((    <string> undefined)),\n               eventIdentifier = /** @type {?} */((    <string> undefined)) } = {}) {\n\n    super(dataArray, staticKlasses, interval, transitionDuration ? transitionDuration : 3000,\n               fadeInOverride, fadeOutOverride, eventIdentifier, transitionDuration !== undefined);\n  };\n/**\n * @return {?}\n */\npublic animate(): void {\n    if (!this.itemA && !this.itemB) {\n      this.itemA = new TransitionItem(1, 'show', this.visibleKlass(), this.next());\n      this.itemB = new TransitionItem(2, 'hide', this.invisibleKlass(), this.next());\n    }\n\n    // `a` is the active track and `b` is the\n    // track to which `a` dissolves.\n    // `isOnTop` indicates whether `a` has a\n    // higher z-index than `b`\n    const [a, b] = this.getABTracks();\n    const /** @type {?} */ isOnTop = a.track === 1;\n\n    this.visible(a).then(() => {\n      if (isOnTop) b.klass = this.visibleKlass();\n\n      // If `a` has a higher z-index than `b`,\n      // we can simply fade out to reveal `b`.\n      // Otherwise if `a` has a lower z-index,\n      // `b` needs to fade in.\n      return isOnTop ? this.fadeOut(a) : this.fadeIn(b);\n    }).then(() => {\n      if (isOnTop) a.klass = this.invisibleKlass();\n      a.data = this.next();\n      this.animate();\n    });\n  }\n}","import { DissolveAnimation } from './dissolve-animation';\nimport { TransitionItem } from './transition-item';\nexport class SequenceDissolve extends DissolveAnimation {\n/**\n * @param {?} dataArray\n * @param {?=} __1\n */\nconstructor( dataArray:           any[],\n             { staticKlasses = /** @type {?} */((      <string> undefined)),\n               interval = /** @type {?} */((           <number> undefined)),\n               transitionDuration = /** @type {?} */(( <number> undefined)),\n               fadeInOverride = /** @type {?} */((     <string> undefined)),\n               fadeOutOverride = /** @type {?} */((    <string> undefined)),\n               eventIdentifier = /** @type {?} */((    <string> undefined)) } = {}) {\n\n    const transitionDurationWasProvided = transitionDuration !== undefined;\n\n    // Make the transition duration slightly shorter\n    // to avoid a flash when the transition ends\n    const tdAdjusted = transitionDuration ? Math.floor(transitionDuration*.96): 2900;\n\n    super(dataArray, staticKlasses, interval, tdAdjusted, fadeInOverride,\n          fadeOutOverride, eventIdentifier, transitionDurationWasProvided);\n  };\n/**\n * @return {?}\n */\npublic animate(): void {\n    if (!this.itemA && !this.itemB) {\n      this.itemA = new TransitionItem(1, 'show', this.hiddenKlass(), this.next());\n      this.itemB = new TransitionItem(2, 'hide', this.hiddenKlass(), this.next());\n    }\n\n    const [a, b] = this.getABTracks();\n    this.shown(a).then(() => {\n      return this.fadeOut(a);\n    }).then(() => {\n      [a.klass, a.data] = [this.hiddenKlass(), this.next()];\n      return this.fadeIn(b);\n    }).then(() => {\n      this.animate();\n    });\n  }\n}"],"names":["dataArray","staticKlasses","interval","transitionDuration","fadeInOverride","fadeOutOverride","eventIdentifier","transitionDurationWasProvided","this","_this","klasses","fadeOutCSSLabel","fadeInCSSLabel","invisibleCSSLabel","visibleCSSLabel","hiddenCSSLabel","shownCSSLabel","item","klass","delay","eventName","itemName","emitEvent","Promise","resolve","reject","setTimeout","it","promisefy","undefined","DissolveAnimation","a","b","itemA","state","_a","_b","data","_c","index","i","length","label","evt","Event","document","dispatchEvent","track","_d","_e","_f","_g","_h","_super","__extends","CrossDissolve","itemB","TransitionItem","visibleKlass","next","invisibleKlass","isOnTop","visible","then","fadeOut","fadeIn","animate","tdAdjusted","Math","floor","SequenceDissolve","hiddenKlass","shown"],"mappings":"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"}