{"version":3,"file":"css-dissolve-animation-angular.umd.min.js","sources":["../../out-tsc/lib/src/dissolve-animation.ts","../../out-tsc/lib/src/transition-item.ts","../../out-tsc/lib/src/cross-dissolve.ts","../../out-tsc/lib/src/sequence-dissolve.ts"],"sourcesContent":["import { TransitionItem } from './transition-item';\nexport class DissolveAnimation {\npublic itemA: TransitionItem;\npublic itemB: TransitionItem;\npublic data: any;\npublic i = 0;\npublic dataArray: any[];\npublic transitionDuration: number;\npublic interval: number;\npublic staticKlasses: string;\nprivate fadeInCSSLabel: string;\nprivate fadeOutCSSLabel: string;\n/**\n * @param {?} dataArray\n * @param {?} staticKlasses\n * @param {?=} interval\n * @param {?=} transitionDuration\n * @param {?=} fadeInOverride\n * @param {?=} fadeOutOverride\n * @param {?=} transitionDurationWasProvided\n */\nconstructor( dataArray:          any[],\n               staticKlasses:      string,\n               interval:           number=8000,\n               transitionDuration: number,\n               fadeInOverride:     string,\n               fadeOutOverride:    string,\n               transitionDurationWasProvided=false) {\n    this.dataArray = dataArray;\n    this.staticKlasses = staticKlasses;\n    this.interval = interval;\n    this.transitionDuration = transitionDuration;\n\n    if (transitionDurationWasProvided && (!fadeInOverride || !fadeOutOverride)) {\n      throw 'ERROR: parameter 5 (fade in CSS class name) '+\n            'and 6 (fade out CSS class name) are required '+\n            'if you provide a 3rd parameter (transition duration).';\n    } else if (transitionDurationWasProvided && (fadeInOverride && fadeOutOverride)) {\n      this.fadeInCSSLabel = fadeInOverride;\n      this.fadeOutCSSLabel = fadeOutOverride;\n    } else {\n      this.fadeInCSSLabel = 'da-fade-in';\n      this.fadeOutCSSLabel = 'da-fade-out';\n    }\n  };\n/**\n * @param {?} klasses\n * @return {?}\n */\npublic klasses(klasses: string):string {\n    return this.staticKlasses === undefined ? klasses : `${klasses} ${this.staticKlasses}`;\n  }\npublic fadeOutKlass   = () => this.klasses(this.fadeOutCSSLabel);\npublic fadeInKlass    = () => this.klasses(this.fadeInCSSLabel);\npublic invisibleKlass = () => this.klasses('da-invisible');\npublic visibleKlass   = () => this.klasses('da-visible');\npublic hiddenKlass    = () => this.klasses('da-hidden');\npublic shownKlass     = () => this.klasses('da-shown');\nprivate promisefy = (item: TransitionItem, klass: string, delay: number):Promise<any> => {\n    item.klass = klass;\n    return new Promise((r, j) => setTimeout(r, delay, item));\n  }\npublic fadeOut   = (it: TransitionItem) => this.promisefy(it, this.fadeOutKlass(), this.transitionDuration);\npublic fadeIn    = (it: TransitionItem) => this.promisefy(it, this.fadeInKlass(), this.transitionDuration);\npublic invisible = (it: TransitionItem) => this.promisefy(it, this.invisibleKlass(), this.interval);\npublic visible   = (it: TransitionItem) => this.promisefy(it, this.visibleKlass(), this.interval);\npublic hidden    = (it: TransitionItem) => this.promisefy(it, this.hiddenKlass(), this.interval);\npublic shown     = (it: TransitionItem) => this.promisefy(it, this.shownKlass(), this.interval);\n/**\n * @return {?}\n */\npublic getABTracks(): TransitionItem[] {\n    let /** @type {?} */ a: TransitionItem;\n    let /** @type {?} */ b: TransitionItem;\n    if (this.itemA.state === 'show') {\n      [a, b] = [this.itemA, this.itemB];\n    } else {\n      [a, b] = [this.itemB, this.itemA];\n    }\n    this.data = b.data;\n\n    // switch the `'hide'`/`'show'` order so\n    // next time `a` and `b` get assigned to\n    // the opposit items\n    [a.state, b.state] = ['hide', 'show'];\n    return [a, b];\n  }\n/**\n * @return {?}\n */\npublic next(): any {\n    const /** @type {?} */ index = this.i;\n    this.i = this.i === this.dataArray.length-1 ? 0 : this.i+1;\n    return this.dataArray[index];\n  }\n}\n\nfunction DissolveAnimation_tsickle_Closure_declarations() {\n/** @type {?} */\nDissolveAnimation.prototype.itemA;\n/** @type {?} */\nDissolveAnimation.prototype.itemB;\n/** @type {?} */\nDissolveAnimation.prototype.data;\n/** @type {?} */\nDissolveAnimation.prototype.i;\n/** @type {?} */\nDissolveAnimation.prototype.dataArray;\n/** @type {?} */\nDissolveAnimation.prototype.transitionDuration;\n/** @type {?} */\nDissolveAnimation.prototype.interval;\n/** @type {?} */\nDissolveAnimation.prototype.staticKlasses;\n/** @type {?} */\nDissolveAnimation.prototype.fadeInCSSLabel;\n/** @type {?} */\nDissolveAnimation.prototype.fadeOutCSSLabel;\n/** @type {?} */\nDissolveAnimation.prototype.fadeOutKlass;\n/** @type {?} */\nDissolveAnimation.prototype.fadeInKlass;\n/** @type {?} */\nDissolveAnimation.prototype.invisibleKlass;\n/** @type {?} */\nDissolveAnimation.prototype.visibleKlass;\n/** @type {?} */\nDissolveAnimation.prototype.hiddenKlass;\n/** @type {?} */\nDissolveAnimation.prototype.shownKlass;\n/** @type {?} */\nDissolveAnimation.prototype.promisefy;\n/** @type {?} */\nDissolveAnimation.prototype.fadeOut;\n/** @type {?} */\nDissolveAnimation.prototype.fadeIn;\n/** @type {?} */\nDissolveAnimation.prototype.invisible;\n/** @type {?} */\nDissolveAnimation.prototype.visible;\n/** @type {?} */\nDissolveAnimation.prototype.hidden;\n/** @type {?} */\nDissolveAnimation.prototype.shown;\n}\n","\nexport class TransitionItem {\npublic track: number;\npublic state: string;\npublic klass: string;\npublic data: any;\n/**\n * @param {?} track\n * @param {?} state\n * @param {?} klass\n * @param {?} data\n */\nconstructor(track: number, state: string, klass: string, data: string) {\n    this.track = track;\n    this.state = state;\n    this.klass = klass;\n    this.data = data;\n  }\n}\n\nfunction TransitionItem_tsickle_Closure_declarations() {\n/** @type {?} */\nTransitionItem.prototype.track;\n/** @type {?} */\nTransitionItem.prototype.state;\n/** @type {?} */\nTransitionItem.prototype.klass;\n/** @type {?} */\nTransitionItem.prototype.data;\n}\n","import { DissolveAnimation } from './dissolve-animation';\nimport { TransitionItem } from './transition-item';\nexport class CrossDissolve extends DissolveAnimation {\n/**\n * @param {?} dataArray\n * @param {?=} staticKlasses\n * @param {?=} interval\n * @param {?=} transitionDuration\n * @param {?=} fadeInOverride\n * @param {?=} fadeOutOverride\n */\nconstructor( dataArray:          any[],\n               staticKlasses:      string=undefined,\n               interval:           number=undefined,\n               transitionDuration: number=undefined,\n               fadeInOverride:     string=undefined,\n               fadeOutOverride:    string=undefined) {\n    super(dataArray, staticKlasses, interval, transitionDuration ? transitionDuration : 3000,\n               fadeInOverride, fadeOutOverride, transitionDuration !== undefined);\n  };\n/**\n * @return {?}\n */\npublic animate(): void {\n    if (!this.itemA && !this.itemB) {\n      this.itemA = new TransitionItem(1, 'show', this.visibleKlass(), this.next());\n      this.itemB = new TransitionItem(2, 'hide', this.invisibleKlass(), this.next());\n    }\n\n    // `a` is the active track and `b` is the\n    // track to which `a` dissolves.\n    // `isOnTop` indicates whether `a` has a\n    // higher z-index than `b`\n    const [a, b] = this.getABTracks();\n    const /** @type {?} */ isOnTop = a.track === 1;\n\n    this.visible(a).then(() => {\n      if (isOnTop) b.klass = this.visibleKlass();\n\n      // If `a` has a higher z-index than `b`,\n      // we can simply fade out to reveal `b`.\n      // Otherwise if `a` has a lower z-index,\n      // `b` needs to fade in.\n      return isOnTop ? this.fadeOut(a) : this.fadeIn(b);\n    }).then(() => {\n      if (isOnTop) a.klass = this.invisibleKlass();\n      a.data = this.next();\n      this.animate();\n    });\n  }\n}","import { DissolveAnimation } from './dissolve-animation';\nimport { TransitionItem } from './transition-item';\nexport class SequenceDissolve extends DissolveAnimation {\n/**\n * @param {?} dataArray\n * @param {?=} staticKlasses\n * @param {?=} interval\n * @param {?=} transitionDuration\n * @param {?=} fadeInOverride\n * @param {?=} fadeOutOverride\n */\nconstructor( dataArray:          any[],\n               staticKlasses:      string=undefined,\n               interval:           number=undefined,\n               transitionDuration: number=undefined,\n               fadeInOverride:     string=undefined,\n               fadeOutOverride:    string=undefined) {\n\n    const transitionDurationWasProvided = transitionDuration !== undefined;\n\n    // // Make the transition duration slightly shorter\n    // // to avoid a flash when the transition ends\n    transitionDuration = transitionDuration ? Math.floor(transitionDuration*.96): 2900;\n\n    super(dataArray, staticKlasses, interval, transitionDuration,\n          fadeInOverride, fadeOutOverride, transitionDurationWasProvided);\n  };\n/**\n * @return {?}\n */\npublic animate(): void {\n    if (!this.itemA && !this.itemB) {\n      this.itemA = new TransitionItem(1, 'show', this.hiddenKlass(), this.next());\n      this.itemB = new TransitionItem(2, 'hide', this.hiddenKlass(), this.next());\n    }\n\n    const [a, b] = this.getABTracks();\n    this.shown(a).then(() => {\n      return this.fadeOut(a);\n    }).then(() => {\n      [a.klass, a.data] = [this.hiddenKlass(), this.next()];\n      return this.fadeIn(b);\n    }).then(() => {\n      this.animate();\n    });\n  }\n}"],"names":["dataArray","staticKlasses","interval","transitionDuration","fadeInOverride","fadeOutOverride","transitionDurationWasProvided","this","_this","klasses","fadeOutCSSLabel","fadeInCSSLabel","item","klass","delay","Promise","r","j","setTimeout","it","promisefy","fadeOutKlass","fadeInKlass","invisibleKlass","visibleKlass","hiddenKlass","shownKlass","DissolveAnimation","undefined","a","b","itemA","state","_a","_b","data","_c","index","i","length","track","_super","__extends","CrossDissolve","itemB","TransitionItem","next","isOnTop","visible","then","fadeOut","fadeIn","animate","Math","floor","SequenceDissolve","shown"],"mappings":"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"}